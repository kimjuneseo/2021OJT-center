<%@page import="member.MemberDBBean"%>
<%@page import="member.MemberDataBean"%>
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>

<%
	// 한글 처리
	request.setCharacterEncoding("utf-8");
	// <폼에서 넘어오는 값을 획득하는 방법>
	// 1번 방법 - request 내장객체 활용하는 방법
	/* String id = request.getParameter("id");
	String pwd = request.getParameter("pwd");
	String name = request.getParameter("name");
	String tel = request.getParameter("tel");
	String address1 = request.getParameter("address1");
	String address2 = request.getParameter("address2");
	String email = request.getParameter("email"); */
	
	// 회원 객체 생성
	/* MemberDataBean member = new MemberDataBean();
	member.setId(id);
	member.setPwd(pwd);
	member.setName(name);
	member.setTel(tel);
	member.setAddress1(address1);
	member.setAddress2(address2);
	member.setEmail(email) */;
	
	// 2번 방법 - 액션태그(action tag)를 활용하는 방법
	// include 액션태그, forward 액션태그, useBean 액션태그(여기에서 사용)
	%>
	
	<% 
	//DB 연동, 쿼리 실행
	MemberDBBean memberPro = MemberDBBean.getInstance();
	// 리턴값 - check 변수 사용 : 1(가입 성공), 0(가입 실패)
	int check = memberPro.insertMember(member);
	out.print("<script>");
	if(check == 0){ // 회원가입 실패
		out.println("alert(`회원가입에 실패하였습니다.\\n 다시 입력해주세요.`)");
		out.println("history.back()");
	}else if(check == 1 ){ // 회원가입 성공
		out.println("alert(`회원가입에 성공하였습니다.\\n스트릿 우먼 파이터 팬카페에 오신것을 환영합니다.`)");
		out.println("location.href = 'memberLoginForm.jsp'");
	}

	out.print("</script>");
%>

</body>
</html>